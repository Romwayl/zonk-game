<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ò–≥—Ä–∞ Zonk</title>
    <link rel="stylesheet" href="/style.css">
</head>
<body>
    <div class="container">
        <h1>üé≤ ZONK - –ù–∞—Å—Ç–æ—è—â–∏–µ –ø—Ä–∞–≤–∏–ª–∞! üé≤</h1>
        
        <% if (game.gameOver) { %>
            <div class="win-message">
                üèÜ –ü–û–ë–ï–î–ê! üèÜ<br>
                –¢—ã –Ω–∞–±—Ä–∞–ª <%= game.totalScore %> –æ—á–∫–æ–≤!
            </div>
        <% } %>
        
        <div class="score-board">
            <div class="total-score">–û–±—â–∏–π —Å—á–µ—Ç: <%= game.totalScore %></div>
            <div class="round-score">–û—á–∫–∏ –∑–∞ —Ä–∞—É–Ω–¥: <%= currentScore %></div>
            <div class="rolls-left">–ë—Ä–æ—Å–∫–æ–≤ –æ—Å—Ç–∞–ª–æ—Å—å: <%= game.rollsLeft %></div>
            <% if (game.zonkCount > 0) { %>
                <div class="zonk-count">ZONK'–æ–≤ –ø–æ–¥—Ä—è–¥: <%= game.zonkCount %></div>
            <% } %>
        </div>

        <div class="dice-container">
            <% game.dice.forEach((die, index) => { %>
                <div class="dice <%= game.selected[index] ? 'selected' : '' %>" 
                     onclick="toggleDice(<%= index %>)">
                    <span class="dice-value"><%= die %></span>
                </div>
            <% }); %>
        </div>

        <div class="game-info">
            <% if (!game.hasMinimumPoints && game.totalScore === 0) { %>
                <div class="info-message">‚ö†Ô∏è –ù—É–∂–Ω–æ –Ω–∞–±—Ä–∞—Ç—å –º–∏–Ω–∏–º—É–º 300 –æ—á–∫–æ–≤ –¥–ª—è –ø–µ—Ä–≤–æ–≥–æ –≤–∑—è—Ç–∏—è!</div>
            <% } %>
            <% if (allDiceUsed) { %>
                <div class="info-message">üéâ Hot Dice! –í—Å–µ –∫–æ—Å—Ç–∏ –¥–∞—é—Ç –æ—á–∫–∏ - –±—Ä–æ—Å–∞–π —Å–Ω–æ–≤–∞!</div>
            <% } %>
        </div>

        <div class="controls">
            <form action="/roll" method="POST">
                <button type="submit" <%= game.rollsLeft === 0 || game.gameOver ? 'disabled' : '' %>>
                    üé≤ –ë—Ä–æ—Å–∏—Ç—å –∫–æ—Å—Ç–∏ (<%= game.rollsLeft %>)
                </button>
            </form>

            <form action="/take" method="POST">
                <button type="submit" class="take-btn" 
                        <%= !canTake || game.gameOver ? 'disabled' : '' %>>
                    üí∞ –ó–∞–±—Ä–∞—Ç—å –æ—á–∫–∏ (<%= currentScore %>)
                </button>
            </form>

            <form action="/reset" method="POST">
                <button type="submit" class="reset-btn">üîÑ –ù–æ–≤–∞—è –∏–≥—Ä–∞</button>
            </form>
        </div>

        <% if (zonk && game.rollsLeft < 3) { %>
            <div class="zonk-message">
                üí• ZONK! –ù–µ—Ç –æ—á–∫–æ–≤ –≤ —ç—Ç–æ–º —Ä–∞—É–Ω–¥–µ!<br>
                <% if (game.zonkCount >= 2) { %>
                    ‚ö†Ô∏è –°–ª–µ–¥—É—é—â–∏–π ZONK –æ—Ç–Ω–∏–º–µ—Ç 500 –æ—á–∫–æ–≤!
                <% } %>
            </div>
        <% } %>

        <div class="combinations">
            <h3>üéØ –ö–æ–º–±–∏–Ω–∞—Ü–∏–∏:</h3>
            <div class="combo-list">
                <span>1 = 100</span>
                <span>5 = 50</span>
                <span>3√ó1 = 1000</span>
                <span>3√ó2 = 200</span>
                <span>3√ó3 = 300</span>
                <span>3√ó4 = 400</span>
                <span>3√ó5 = 500</span>
                <span>3√ó6 = 600</span>
                <span>3 –ø–∞—Ä—ã = 750</span>
                <span>–ü—Ä—è–º–∞—è = 1500</span>
            </div>
        </div>
    </div>

    <script>
        function toggleDice(index) {
            fetch('/toggle/' + index, { method: 'POST' })
                .then(() => window.location.reload());
        }
    </script>
</body>
</html>
