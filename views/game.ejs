<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ZONK - –ö–æ–º–Ω–∞—Ç–∞ <%= roomId %></title>
    <link rel="stylesheet" href="/style.css">
</head>
<body>
    <div class="container">
        <!-- –õ–µ–≤–∞—è –ø–∞–Ω–µ–ª—å: –ò–≥—Ä–æ–∫–∏ -->
        <div class="players-panel">
            <div class="panel-header">
                <h2>üë• –ò–≥—Ä–æ–∫–∏ (<span id="playerCount">0/4</span>)</h2>
            </div>
            <div class="player-list" id="playersList">
                <!-- Players will be added here dynamically -->
            </div>
            
            <div class="combinations-panel" style="margin-top: 20px;">
                <h3>üé≤ –ö–æ–º–Ω–∞—Ç–∞</h3>
                <div style="font-size: 2em; margin: 10px 0; font-weight: bold;" id="roomCode">-</div>
                <button onclick="copyRoomCode()" class="btn btn-secondary" style="width: 100%;">
                    üìã –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ
                </button>
                <button onclick="leaveGame()" class="btn btn-danger" style="width: 100%; margin-top: 10px;">
                    üö™ –í—ã–π—Ç–∏
                </button>
            </div>
        </div>

        <!-- –¶–µ–Ω—Ç—Ä: –ò–≥—Ä–æ–≤–∞—è –∑–æ–Ω–∞ -->
        <div class="game-area">
            <div class="game-title">
                <h1 id="gameStatus">–ó–∞–≥—Ä—É–∑–∫–∞...</h1>
                <div class="subtitle">–•–æ–¥: <span id="currentPlayer">-</span></div>
            </div>

            <!-- –û–±–ª–∞—Å—Ç—å –æ–∂–∏–¥–∞–Ω–∏—è -->
            <div id="waitingArea" style="display: none;">
                <div class="combinations-panel" style="text-align: center; padding: 40px;">
                    <h2>‚è≥ –û–∂–∏–¥–∞–Ω–∏–µ –∏–≥—Ä–æ–∫–æ–≤...</h2>
                    <p style="margin: 20px 0;">–ú–∏–Ω–∏–º—É–º 2 –∏–≥—Ä–æ–∫–∞ –¥–ª—è –Ω–∞—á–∞–ª–∞ –∏–≥—Ä—ã</p>
                    <button id="startGameBtn" onclick="startGame()" class="btn btn-primary" style="display: none;">
                        üöÄ –ù–∞—á–∞—Ç—å –∏–≥—Ä—É
                    </button>
                </div>
            </div>

            <!-- –°–æ–æ–±—â–µ–Ω–∏–µ –æ –ø–æ–±–µ–¥–µ -->
            <div id="winnerMessage" class="combinations-panel" style="display: none; text-align: center; padding: 40px; font-size: 2em;">
            </div>

            <!-- –ò–≥—Ä–æ–≤—ã–µ –∫–æ–Ω—Ç—Ä–æ–ª—ã -->
            <div id="gameControls" style="display: none;">
                <!-- –ó–æ–Ω–∞ –¥–ª—è –∞–∫—Ç–∏–≤–Ω–æ–≥–æ –∏–≥—Ä–æ–∫–∞ -->
                <div id="currentPlayerArea" style="display: none;">
                    <div class="combinations-panel">
                        <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 20px; margin-bottom: 20px;">
                            <div style="text-align: center;">
                                <div style="font-size: 0.9em; opacity: 0.7;">–û–±—â–∏–π —Å—á–µ—Ç</div>
                                <div style="font-size: 2em; font-weight: bold;" id="myScore">0</div>
                            </div>
                            <div style="text-align: center;">
                                <div style="font-size: 0.9em; opacity: 0.7;">–û—á–∫–∏ —Ä–∞—É–Ω–¥–∞</div>
                                <div style="font-size: 2em; font-weight: bold; color: #4CAF50;" id="roundScore">0</div>
                            </div>
                            <div style="text-align: center;">
                                <div style="font-size: 0.9em; opacity: 0.7;">–ö–æ—Å—Ç–µ–π</div>
                                <div style="font-size: 2em; font-weight: bold;" id="diceToRoll">6</div>
                            </div>
                        </div>

                        <!-- –ö–æ—Å—Ç–∏ -->
                        <div class="dice-container" id="diceContainer" style="display: none;">
                            <!-- Dice will be added here -->
                        </div>

                        <!-- –ö–Ω–æ–ø–∫–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è -->
                        <div id="playerControls" style="display: none; grid-template-columns: 1fr 1fr; gap: 15px; margin-top: 20px;">
                            <button id="rollBtn" onclick="rollDice()" class="btn btn-primary">
                                üé≤ –ë—Ä–æ—Å–∏—Ç—å –∫–æ—Å—Ç–∏
                            </button>
                            <button id="takeBtn" onclick="takePoints()" class="btn btn-success">
                                üí∞ –í–∑—è—Ç—å –æ—á–∫–∏
                            </button>
                        </div>
                    </div>
                </div>

                <!-- –ó–æ–Ω–∞ –¥–ª—è –Ω–∞–±–ª—é–¥–∞—Ç–µ–ª—è -->
                <div id="observerArea" style="display: none;">
                    <div class="combinations-panel" style="text-align: center;">
                        <h2>üëÅÔ∏è –ù–∞–±–ª—é–¥–µ–Ω–∏–µ</h2>
                        <p>–•–æ–¥ –∏–≥—Ä–æ–∫–∞: <strong id="observerCurrentPlayer">-</strong></p>
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin: 20px 0;">
                            <div>
                                <div style="opacity: 0.7;">–û—á–∫–∏ —Ä–∞—É–Ω–¥–∞</div>
                                <div style="font-size: 1.5em; font-weight: bold;" id="observerRoundScore">0</div>
                            </div>
                            <div>
                                <div style="opacity: 0.7;">–ö–æ—Å—Ç–µ–π</div>
                                <div style="font-size: 1.5em; font-weight: bold;" id="observerDiceToRoll">6</div>
                            </div>
                        </div>
                        <div class="dice-container" id="observerDice">
                            <!-- Dice will be added here -->
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- –ü—Ä–∞–≤–∞—è –ø–∞–Ω–µ–ª—å: –ß–∞—Ç -->
        <div class="chat-panel">
            <div class="panel-header">
                <h2>üí¨ –ß–∞—Ç</h2>
            </div>
            <div class="chat-container">
                <div class="chat-messages" id="chatMessages">
                    <!-- Messages will be added here -->
                </div>
                <div class="chat-input-container">
                    <input type="text" id="chatInput" class="chat-input" placeholder="–ù–∞–ø–∏—à–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ...">
                    <button onclick="sendMessage()" class="btn btn-primary">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
                </div>
            </div>
        </div>
    </div>

    <!-- –û—Ç–ª–∞–¥–æ—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è -->
    <div class="debug-info">
        <div class="debug-line">Status: <span id="debugStatus">Disconnected</span></div>
        <div class="debug-line">Socket: <span id="debugSocketId">-</span></div>
        <div class="debug-line">Room: <span id="debugRoom">-</span></div>
        <div class="debug-line">My Turn: <span id="debugMyTurn">NO</span></div>
        <div class="debug-line">Game Status: <span id="debugGameStatus">-</span></div>
        <div id="debugInfo" style="max-height: 100px; overflow-y: auto; margin-top: 10px; font-size: 0.8em;"></div>
    </div>

    <script src="/socket.io/socket.io.js"></script>
    <script>
        // Set room ID for the game.js script
        window.ROOM_ID = "<%= roomId %>";
    </script>
    <script src="/js/game.js"></script>
</body>
</html>
