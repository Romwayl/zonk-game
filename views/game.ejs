<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ò–≥—Ä–∞ Zonk</title>
    <link rel="stylesheet" href="/style.css">
</head>
<body>
    <div class="container">
        <h1>üé≤ ZONK Game üé≤</h1>
        
        <div class="score-board">
            <div class="total-score">–û–±—â–∏–π —Å—á–µ—Ç: <%= game.totalScore %></div>
            <div class="round-score">–û—á–∫–∏ –∑–∞ —Ä–∞—É–Ω–¥: <%= game.calculateScore() %></div>
            <div class="rolls-left">–ë—Ä–æ—Å–∫–æ–≤ –æ—Å—Ç–∞–ª–æ—Å—å: <%= game.rollsLeft %></div>
        </div>

        <div class="dice-container">
            <% game.dice.forEach((die, index) => { %>
                <div class="dice <%= game.selected[index] ? 'selected' : '' %>" 
                     onclick="toggleDice(<%= index %>)">
                    <%= die === 0 ? '?' : die %>
                </div>
            <% }); %>
        </div>

        <div class="controls">
            <form action="/roll" method="POST">
                <button type="submit" <%= game.rollsLeft === 0 ? 'disabled' : '' %>>
                    –ë—Ä–æ—Å–∏—Ç—å –∫–æ—Å—Ç–∏ (<%= game.rollsLeft %>)
                </button>
            </form>

            <form action="/take" method="POST">
                <button type="submit" <%= game.calculateScore() === 0 ? 'disabled' : '' %>>
                    –ó–∞–±—Ä–∞—Ç—å –æ—á–∫–∏
                </button>
            </form>

            <form action="/reset" method="POST">
                <button type="submit">–ù–æ–≤–∞—è –∏–≥—Ä–∞</button>
            </form>
        </div>

        <% if (game.isZonk() && game.rollsLeft < 3) { %>
            <div class="zonk-message">ZONK! –ù–µ—Ç –æ—á–∫–æ–≤ –≤ —ç—Ç–æ–º —Ä–∞—É–Ω–¥–µ!</div>
        <% } %>
    </div>

    <script>
        function toggleDice(index) {
            fetch('/toggle/' + index, { method: 'POST' })
                .then(() => window.location.reload());
        }
    </script>
</body>
</html>
