<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ZONK Pro - –ò–≥—Ä–∞ –≤ –∫–æ—Å—Ç–∏</title>
    <link rel="stylesheet" href="/style.css">
</head>
<body>
    <div class="container">
        <!-- –õ–µ–≤–∞—è –ø–∞–Ω–µ–ª—å - –ò–≥—Ä–æ–∫–∏ -->
        <div class="players-panel">
            <h2>üéÆ –ò–≥—Ä–æ–∫–∏</h2>
            <ul class="player-list">
                <li class="player-item">
                    <span class="player-name">–†–æ–º–∞–Ω –†.</span>
                    <span class="player-score"><%= game.totalScore || 0 %></span>
                </li>
                <li class="player-item">
                    <span class="player-name">–ü—Ä–æ—Ç–∏–≤–Ω–∏–∫</span>
                    <span class="player-score">‚Äì</span>
                </li>
                <li class="player-item">
                    <span class="player-name">–ò–≥—Ä–æ–∫ 3</span>
                    <span class="player-score">‚Äì</span>
                </li>
                <li class="player-item">
                    <span class="player-name">–ò–≥—Ä–æ–∫ 4</span>
                    <span class="player-score">‚Äì</span>
                </li>
            </ul>
        </div>

        <!-- –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω–∞—è –∏–≥—Ä–æ–≤–∞—è –æ–±–ª–∞—Å—Ç—å -->
        <div class="game-area">
            <div class="game-title">
                <h1>üé≤ ZONK PRO</h1>
                <div class="subtitle">–°–æ–±–∏—Ä–∞–π—Ç–µ –∫—É–±–∏–∫–∏ —Å –∫–æ–º–±–∏–Ω–∞—Ü–∏—è–º–∏!</div>
            </div>

            <% if (game.gameOver) { %>
                <div class="win-message">
                    üèÜ –ü–û–ë–ï–î–ê! üèÜ<br>
                    –¢—ã –Ω–∞–±—Ä–∞–ª <%= game.totalScore %> –æ—á–∫–æ–≤!
                </div>
            <% } %>

            <div class="score-board">
                <div class="score-item">
                    <div class="score-label">–û–±—â–∏–π —Å—á–µ—Ç</div>
                    <div class="score-value"><%= game.totalScore || 0 %></div>
                </div>
                <div class="score-item">
                    <div class="score-label">–û—á–∫–∏ —Ä–∞—É–Ω–¥–∞</div>
                    <div class="score-value"><%= currentScore || 0 %></div>
                </div>
                <div class="score-item">
                    <div class="score-label">–ë—Ä–æ—Å–∫–æ–≤</div>
                    <div class="score-value"><%= game.rollsLeft || 3 %></div>
                </div>
            </div>

            <div class="dice-container">
                <% game.dice.forEach((die, index) => { %>
                    <div class="dice <%= game.selected && game.selected[index] ? 'selected' : '' %>" 
                         onclick="toggleDice(<%= index %>)">
                        <span class="dice-value"><%= die %></span>
                    </div>
                <% }); %>
            </div>

            <% if (zonk && game.rollsLeft < 3) { %>
                <div class="message zonk-message">
                    üí• ZONK! –ù–µ—Ç –æ—á–∫–æ–≤ –≤ —ç—Ç–æ–º —Ä–∞—É–Ω–¥–µ!
                </div>
            <% } %>

            <% if (allDiceUsed) { %>
                <div class="message" style="background: linear-gradient(135deg, #74b9ff, #0984e3); color: white;">
                    üéâ Hot Dice! –í—Å–µ –∫–æ—Å—Ç–∏ –¥–∞—é—Ç –æ—á–∫–∏ - –±—Ä–æ—Å–∞–π —Å–Ω–æ–≤–∞!
                </div>
            <% } %>

            <div class="controls">
                <form action="/roll" method="POST">
                    <button type="submit" class="btn btn-primary" 
                            <%= game.rollsLeft === 0 || game.gameOver ? 'disabled' : '' %>>
                        üé≤ –ë—Ä–æ—Å–∏—Ç—å (<%= game.rollsLeft %>)
                    </button>
                </form>

                <form action="/take" method="POST">
                    <button type="submit" class="btn btn-success" 
                            <%= !canTake || game.gameOver ? 'disabled' : '' %>>
                        üí∞ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å (<%= currentScore || 0 %>)
                    </button>
                </form>

                <form action="/reset" method="POST">
                    <button type="submit" class="btn btn-danger">
                        üîÑ –ù–æ–≤–∞—è –∏–≥—Ä–∞
                    </button>
                </form>
            </div>
        </div>

        <!-- –ü—Ä–∞–≤–∞—è –ø–∞–Ω–µ–ª—å - –ö–æ–º–±–∏–Ω–∞—Ü–∏–∏ -->
        <div class="combinations-panel">
            <h2>üéØ –ö–æ–º–±–∏–Ω–∞—Ü–∏–∏</h2>
            
            <div class="combo-grid">
                <div class="combo-item">
                    <div class="combo-value">100</div>
                    <div class="combo-desc">–ó–∞ –∫–∞–∂–¥—É—é 1</div>
                </div>
                <div class="combo-item">
                    <div class="combo-value">50</div>
                    <div class="combo-desc">–ó–∞ –∫–∞–∂–¥—É—é 5</div>
                </div>
                <div class="combo-item">
                    <div class="combo-value">1000</div>
                    <div class="combo-desc">3 –µ–¥–∏–Ω–∏—Ü—ã</div>
                </div>
                <div class="combo-item">
                    <div class="combo-value">200</div>
                    <div class="combo-desc">3 –¥–≤–æ–π–∫–∏</div>
                </div>
                <div class="combo-item">
                    <div class="combo-value">300</div>
                    <div class="combo-desc">3 —Ç—Ä–æ–π–∫–∏</div>
                </div>
                <div class="combo-item">
                    <div class="combo-value">400</div>
                    <div class="combo-desc">3 —á–µ—Ç–≤–µ—Ä–∫–∏</div>
                </div>
                <div class="combo-item">
                    <div class="combo-value">500</div>
                    <div class="combo-desc">3 –ø—è—Ç–µ—Ä–∫–∏</div>
                </div>
                <div class="combo-item">
                    <div class="combo-value">600</div>
                    <div class="combo-desc">3 —à–µ—Å—Ç–µ—Ä–∫–∏</div>
                </div>
            </div>

            <div class="special-features">
                <div class="feature-item">
                    <div class="feature-title">üé≠ –ë—Ä–æ—Å–æ–∫ —Å –¥–∂–æ–∫–µ—Ä–æ–º</div>
                    <div class="feature-desc">–ü–æ–º–æ–∂–µ—Ç —Å–æ–±—Ä–∞—Ç—å —Ö–æ—Ä–æ—à—É—é –∫–æ–º–±–∏–Ω–∞—Ü–∏—é</div>
                </div>
                <div class="feature-item">
                    <div class="feature-title">‚ö° –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π –±—Ä–æ—Å–æ–∫</div>
                    <div class="feature-desc">–ë—Ä–æ—Å–∏—Ç—å –µ—â–µ —à–µ—Å—Ç—å –∫—É–±–∏–∫–æ–≤ –∑–∞ –æ–¥–∏–Ω —Ö–æ–¥</div>
                </div>
                <div class="feature-item">
                    <div class="feature-title">üõ°Ô∏è –ó–∞—â–∏—Ç–∞ –æ—Ç ZONK</div>
                    <div class="feature-desc">–û—Ç–º–µ–Ω–∞ —Ö–æ–¥–∞ –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ ZONK</div>
                </div>
            </div>
        </div>
    </div>

    <script>
        function toggleDice(index) {
            fetch('/toggle/' + index, { method: 'POST' })
                .then(() => window.location.reload());
        }

        // –î–æ–±–∞–≤–ª—è–µ–º –∞–Ω–∏–º–∞—Ü–∏—é –±—Ä–æ—Å–∫–∞
        document.addEventListener('DOMContentLoaded', function() {
            const dice = document.querySelectorAll('.dice');
            dice.forEach(die => {
                die.style.animation = 'diceAppear 0.5s ease-out';
            });
        });
    </script>

    <style>
        @keyframes diceAppear {
            0% { 
                transform: scale(0) rotate(-180deg);
                opacity: 0;
            }
            100% { 
                transform: scale(1) rotate(0deg);
                opacity: 1;
            }
        }

        .dice {
            animation: diceAppear 0.5s ease-out;
        }
    </style>
</body>
</html>
