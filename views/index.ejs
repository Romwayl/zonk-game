<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ZONK Multiplayer</title>
    <link rel="stylesheet" href="/style.css">
</head>
<body>
    <div class="container" style="grid-template-columns: 1fr; max-width: 1000px;">
        <div class="game-area">
            <div class="game-title">
                <h1>üé≤ ZONK MULTIPLAYER</h1>
                <div class="subtitle">–ò–≥—Ä–∞–π —Å –¥—Ä—É–∑—å—è–º–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏!</div>
            </div>

            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 30px; margin: 40px 0;">
                <!-- –°–æ–∑–¥–∞—Ç—å –∏–≥—Ä—É -->
                <div class="combinations-panel" style="text-align: center;">
                    <h2>üÜï –°–æ–∑–¥–∞—Ç—å –∏–≥—Ä—É</h2>
                    <div style="margin: 25px 0;">
                        <input type="text" id="usernameCreate" placeholder="–¢–≤–æ–µ –∏–º—è" 
                               style="width: 100%; padding: 15px; margin-bottom: 15px; border: none; border-radius: 10px; font-size: 1.1em;">
                        <button onclick="createGame()" class="btn btn-primary" style="width: 100%;">
                            üöÄ –°–æ–∑–¥–∞—Ç—å –∫–æ–º–Ω–∞—Ç—É
                        </button>
                    </div>
                    <div class="feature-desc">
                        –°–æ–∑–¥–∞–π –∫–æ–º–Ω–∞—Ç—É –∏ –ø—Ä–∏–≥–ª–∞—Å–∏ –¥—Ä—É–∑–µ–π –ø–æ —Å—Å—ã–ª–∫–µ
                    </div>
                </div>

                <!-- –ü—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è -->
                <div class="combinations-panel" style="text-align: center;">
                    <h2>üéØ –ü—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è</h2>
                    <div style="margin: 25px 0;">
                        <input type="text" id="usernameJoin" placeholder="–¢–≤–æ–µ –∏–º—è" 
                               style="width: 100%; padding: 15px; margin-bottom: 15px; border: none; border-radius: 10px; font-size: 1.1em;">
                        <input type="text" id="roomCode" placeholder="–ö–æ–¥ –∫–æ–º–Ω–∞—Ç—ã" 
                               style="width: 100%; padding: 15px; margin-bottom: 15px; border: none; border-radius: 10px; font-size: 1.1em;">
                        <button onclick="joinGame()" class="btn btn-success" style="width: 100%;">
                            ‚úÖ –ü—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è
                        </button>
                    </div>
                    <div class="feature-desc">
                        –í–≤–µ–¥–∏ –∫–æ–¥ –∫–æ–º–Ω–∞—Ç—ã –æ—Ç –¥—Ä—É–≥–∞
                    </div>
                </div>
            </div>

            <!-- –ë—ã—Å—Ç—Ä–∞—è –∏–≥—Ä–∞ -->
            <div class="combinations-panel" style="text-align: center; margin-top: 20px;">
                <h2>‚ö° –ë—ã—Å—Ç—Ä–∞—è –∏–≥—Ä–∞</h2>
                <button onclick="quickPlay()" class="btn btn-primary" style="padding: 20px 40px; font-size: 1.3em; margin: 20px 0;">
                    üéÆ –ù–∞–π—Ç–∏ —Å–ª—É—á–∞–π–Ω—É—é –∏–≥—Ä—É
                </button>
                <div class="feature-desc">
                    –ù–∞–π–¥–∏ —Å–ª—É—á–∞–π–Ω—ã—Ö —Å–æ–ø–µ—Ä–Ω–∏–∫–æ–≤ –æ–Ω–ª–∞–π–Ω
                </div>
            </div>

            <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ -->
            <div class="combinations-panel" style="margin-top: 30px;">
                <h2>üìä –û–Ω–ª–∞–π–Ω —Å–µ–π—á–∞—Å</h2>
                <div style="text-align: center; font-size: 2em; color: var(--primary); margin: 20px 0;">
                    <span id="onlineCount">0</span> –∏–≥—Ä–æ–∫–æ–≤
                </div>
                <div style="text-align: center; color: var(--text-secondary);">
                    –ü—Ä–∏—Å–æ–µ–¥–∏–Ω—è–π—Å—è –∫ —Å–æ–æ–±—â–µ—Å—Ç–≤—É ZONK!
                </div>
            </div>
        </div>
    </div>

    <script src="/socket.io/socket.io.js"></script>
    <script>
        const socket = io();
        let onlineCount = 0;

        socket.on('connect', () => {
            console.log('Connected to server');
        });

        socket.on('onlineCount', (count) => {
            onlineCount = count;
            document.getElementById('onlineCount').textContent = count;
        });

        function createGame() {
            const username = document.getElementById('usernameCreate').value || '–ò–≥—Ä–æ–∫';
            socket.emit('createGame', username);
        }

        function joinGame() {
            const username = document.getElementById('usernameJoin').value || '–ò–≥—Ä–æ–∫';
            const roomCode = document.getElementById('roomCode').value;
            if (roomCode) {
                socket.emit('joinGame', { roomId: roomCode, username });
            } else {
                alert('–í–≤–µ–¥–∏—Ç–µ –∫–æ–¥ –∫–æ–º–Ω–∞—Ç—ã');
            }
        }

        function quickPlay() {
            alert('–°–∏—Å—Ç–µ–º–∞ –±—ã—Å—Ç—Ä–æ–π –∏–≥—Ä—ã —Å–∫–æ—Ä–æ –±—É–¥–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω–∞!');
        }

        socket.on('gameCreated', (roomId) => {
            window.location.href = `/game/${roomId}`;
        });

        socket.on('gameJoined', (roomId) => {
            window.location.href = `/game/${roomId}`;
        });

        socket.on('error', (message) => {
            alert('–û—à–∏–±–∫–∞: ' + message);
        });
    </script>
</body>
</html>
