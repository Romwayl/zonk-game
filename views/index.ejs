<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ZONK Multiplayer - –ì–ª–∞–≤–Ω–∞—è</title>
    <link rel="stylesheet" href="/style.css">
</head>
<body>
    <div class="container" style="grid-template-columns: 1fr; max-width: 1000px;">
        <div class="game-area">
            <div class="game-title">
                <h1>üé≤ ZONK MULTIPLAYER</h1>
                <div class="subtitle">–ò–≥—Ä–∞–π —Å –¥—Ä—É–∑—å—è–º–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏!</div>
            </div>

            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 30px; margin: 40px 0;">
                <!-- –°–æ–∑–¥–∞—Ç—å –∏–≥—Ä—É -->
                <div class="combinations-panel" style="text-align: center;">
                    <h2>üÜï –°–æ–∑–¥–∞—Ç—å –∏–≥—Ä—É</h2>
                    <div style="margin: 25px 0;">
                        <input type="text" id="usernameCreate" placeholder="–¢–≤–æ–µ –∏–º—è" 
                               style="width: 100%; padding: 15px; margin-bottom: 15px; border: none; border-radius: 10px; font-size: 1.1em; background: rgba(255,255,255,0.1); color: white;">
                        <button onclick="createGame()" class="btn btn-primary" style="width: 100%;">
                            üöÄ –°–æ–∑–¥–∞—Ç—å –∫–æ–º–Ω–∞—Ç—É
                        </button>
                    </div>
                    <div class="feature-desc">
                        –°–æ–∑–¥–∞–π –∫–æ–º–Ω–∞—Ç—É –∏ –ø—Ä–∏–≥–ª–∞—Å–∏ –¥—Ä—É–∑–µ–π –ø–æ —Å—Å—ã–ª–∫–µ
                    </div>
                </div>

                <!-- –ü—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è -->
                <div class="combinations-panel" style="text-align: center;">
                    <h2>üéØ –ü—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è</h2>
                    <div style="margin: 25px 0;">
                        <input type="text" id="usernameJoin" placeholder="–¢–≤–æ–µ –∏–º—è" 
                               style="width: 100%; padding: 15px; margin-bottom: 15px; border: none; border-radius: 10px; font-size: 1.1em; background: rgba(255,255,255,0.1); color: white;">
                        <input type="text" id="roomCode" placeholder="–ö–æ–¥ –∫–æ–º–Ω–∞—Ç—ã" 
                               style="width: 100%; padding: 15px; margin-bottom: 15px; border: none; border-radius: 10px; font-size: 1.1em; background: rgba(255,255,255,0.1); color: white;">
                        <button onclick="joinGame()" class="btn btn-success" style="width: 100%;">
                            ‚úÖ –ü—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è
                        </button>
                    </div>
                    <div class="feature-desc">
                        –í–≤–µ–¥–∏ –∫–æ–¥ –∫–æ–º–Ω–∞—Ç—ã –æ—Ç –¥—Ä—É–≥–∞
                    </div>
                </div>
            </div>

            <!-- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± –∏–≥—Ä–µ -->
            <div class="combinations-panel" style="margin-top: 30px;">
                <h2>üìñ –ü—Ä–∞–≤–∏–ª–∞ –∏–≥—Ä—ã</h2>
                <div style="line-height: 1.6; text-align: left;">
                    <p><strong>üéØ –¶–µ–ª—å –∏–≥—Ä—ã:</strong> –ü–µ—Ä–≤—ã–º –Ω–∞–±—Ä–∞—Ç—å 1000 –æ—á–∫–æ–≤</p>
                    
                    <p><strong>üîÑ –•–æ–¥ –∏–≥—Ä—ã:</strong></p>
                    <ul style="margin-left: 20px; margin-bottom: 20px;">
                        <li>–ë—Ä–æ—Å–∞–π—Ç–µ 6 –∫—É–±–∏–∫–æ–≤ –∑–∞ —Ö–æ–¥</li>
                        <li>–í—ã–±–∏—Ä–∞–π—Ç–µ –∫–æ—Å—Ç–∏ —Å –æ—á–∫–∞–º–∏ (1, 5, –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏)</li>
                        <li>–ú–æ–∂–Ω–æ –±—Ä–æ—Å–∞—Ç—å –æ—Å—Ç–∞–≤—à–∏–µ—Å—è –∫–æ—Å—Ç–∏ —Å–∫–æ–ª—å–∫–æ —É–≥–æ–¥–Ω–æ —Ä–∞–∑</li>
                        <li>–ó–∞–±–∏—Ä–∞–π—Ç–µ –æ—á–∫–∏ –∏–ª–∏ —Ä–∏—Å–∫—É–π—Ç–µ –ø–æ–ª—É—á–∏—Ç—å ZONK!</li>
                    </ul>
                    
                    <p><strong>üí• ZONK:</strong> –ï—Å–ª–∏ –ø–æ—Å–ª–µ –±—Ä–æ—Å–∫–∞ –Ω–µ—Ç –∫–æ–º–±–∏–Ω–∞—Ü–∏–π - —Ç–µ—Ä—è–µ—Ç–µ –æ—á–∫–∏ —Ä–∞—É–Ω–¥–∞!</p>
                    <p><strong>üéâ Hot Dice:</strong> –ï—Å–ª–∏ –≤—Å–µ –∫–æ—Å—Ç–∏ –¥–∞—é—Ç –æ—á–∫–∏ - –±—Ä–æ—Å–∞–π—Ç–µ —Å–Ω–æ–≤–∞ –≤—Å–µ 6!</p>
                </div>
            </div>

            <!-- –ö–æ–º–±–∏–Ω–∞—Ü–∏–∏ -->
            <div class="combinations-panel" style="margin-top: 20px;">
                <h2>üé∞ –ö–æ–º–±–∏–Ω–∞—Ü–∏–∏</h2>
                <div class="combo-grid">
                    <div class="combo-item">
                        <div class="combo-value">100</div>
                        <div class="combo-desc">–ó–∞ –∫–∞–∂–¥—É—é 1</div>
                    </div>
                    <div class="combo-item">
                        <div class="combo-value">50</div>
                        <div class="combo-desc">–ó–∞ –∫–∞–∂–¥—É—é 5</div>
                    </div>
                    <div class="combo-item">
                        <div class="combo-value">1000</div>
                        <div class="combo-desc">3 –µ–¥–∏–Ω–∏—Ü—ã</div>
                    </div>
                    <div class="combo-item">
                        <div class="combo-value">200</div>
                        <div class="combo-desc">3 –¥–≤–æ–π–∫–∏</div>
                    </div>
                    <div class="combo-item">
                        <div class="combo-value">300</div>
                        <div class="combo-desc">3 —Ç—Ä–æ–π–∫–∏</div>
                    </div>
                    <div class="combo-item">
                        <div class="combo-value">400</div>
                        <div class="combo-desc">3 —á–µ—Ç–≤–µ—Ä–∫–∏</div>
                    </div>
                    <div class="combo-item">
                        <div class="combo-value">500</div>
                        <div class="combo-desc">3 –ø—è—Ç–µ—Ä–∫–∏</div>
                    </div>
                    <div class="combo-item">
                        <div class="combo-value">600</div>
                        <div class="combo-desc">3 —à–µ—Å—Ç–µ—Ä–∫–∏</div>
                    </div>
                    <div class="combo-item">
                        <div class="combo-value">750</div>
                        <div class="combo-desc">3 –ø–∞—Ä—ã</div>
                    </div>
                    <div class="combo-item">
                        <div class="combo-value">1500</div>
                        <div class="combo-desc">–ü—Ä—è–º–∞—è (1-6)</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- –û—Ç–ª–∞–¥–æ—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è -->
    <div class="debug-info">
        <div class="debug-line">Status: <span id="debugStatus">Disconnected</span></div>
        <div class="debug-line">Socket: <span id="debugSocketId">-</span></div>
    </div>

    <script src="/socket.io/socket.io.js"></script>
    <script>
        const socket = io();
        
        // –û–±–Ω–æ–≤–ª—è–µ–º –æ—Ç–ª–∞–¥–æ—á–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é
        socket.on('connect', () => {
            console.log('‚úÖ Connected to server');
            document.getElementById('debugStatus').textContent = 'Connected';
            document.getElementById('debugSocketId').textContent = socket.id;
        });

        socket.on('disconnect', () => {
            console.log('‚ùå Disconnected from server');
            document.getElementById('debugStatus').textContent = 'Disconnected';
        });

        socket.on('connect_error', (error) => {
            console.error('‚ùå Connection error:', error);
            document.getElementById('debugStatus').textContent = 'Error: ' + error.message;
        });

        // –°–æ–∑–¥–∞–Ω–∏–µ –∏–≥—Ä—ã
        function createGame() {
            const username = document.getElementById('usernameCreate').value.trim() || '–ò–≥—Ä–æ–∫';
            console.log('Creating game for:', username);
            socket.emit('createGame', username);
        }

        // –ü—Ä–∏—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –∫ –∏–≥—Ä–µ
        function joinGame() {
            const username = document.getElementById('usernameJoin').value.trim() || '–ò–≥—Ä–æ–∫';
            const roomCode = document.getElementById('roomCode').value.trim().toUpperCase();
            
            if (!roomCode) {
                alert('–í–≤–µ–¥–∏—Ç–µ –∫–æ–¥ –∫–æ–º–Ω–∞—Ç—ã');
                return;
            }

            console.log('Joining game:', roomCode, 'as', username);
            socket.emit('joinGame', { roomId: roomCode, username });
        }

        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π
        socket.on('gameCreated', (roomId) => {
            console.log('Game created, redirecting to:', roomId);
            window.location.href = `/game/${roomId}`;
        });

        socket.on('gameJoined', (roomId) => {
            console.log('Game joined, redirecting to:', roomId);
            window.location.href = `/game/${roomId}`;
        });

        socket.on('error', (message) => {
            console.error('Server error:', message);
            alert('–û—à–∏–±–∫–∞: ' + message);
        });

        // –û–±—Ä–∞–±–æ—Ç–∫–∞ Enter –≤ –ø–æ–ª—è—Ö –≤–≤–æ–¥–∞
        document.getElementById('usernameCreate').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') createGame();
        });

        document.getElementById('roomCode').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') joinGame();
        });

        // –§–æ–∫—É—Å –Ω–∞ –ø–µ—Ä–≤–æ–º –ø–æ–ª–µ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        document.getElementById('usernameCreate').focus();
    </script>
</body>
</html>
