# ZONK - –ú—É–ª—å—Ç–∏–ø–ª–µ–µ—Ä–Ω–∞—è –∏–≥—Ä–∞ –≤ –∫–æ—Å—Ç–∏

–ú–Ω–æ–≥–æ–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ–ø—É–ª—è—Ä–Ω–æ–π –∏–≥—Ä—ã ZONK (Farkle) —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Socket.IO –∏ Express.

## üéÆ –û–ø–∏—Å–∞–Ω–∏–µ

ZONK - —ç—Ç–æ –∞–∑–∞—Ä—Ç–Ω–∞—è –∏–≥—Ä–∞ –≤ –∫–æ—Å—Ç–∏ –¥–ª—è 2-4 –∏–≥—Ä–æ–∫–æ–≤. –ò–≥—Ä–æ–∫–∏ –ø–æ –æ—á–µ—Ä–µ–¥–∏ –±—Ä–æ—Å–∞—é—Ç –∫–æ—Å—Ç–∏, –ø—ã—Ç–∞—è—Å—å –Ω–∞–±—Ä–∞—Ç—å –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—á–∫–æ–≤. –ù–æ –±—É–¥—å—Ç–µ –æ—Å—Ç–æ—Ä–æ–∂–Ω—ã - –µ—Å–ª–∏ –≤—ã –Ω–µ —Å–º–æ–∂–µ—Ç–µ –Ω–∞–±—Ä–∞—Ç—å –æ—á–∫–∏ –≤ –±—Ä–æ—Å–∫–µ, –≤—ã –ø–æ–ª—É—á–∏—Ç–µ ZONK –∏ –ø–æ—Ç–µ—Ä—è–µ—Ç–µ –≤—Å–µ –æ—á–∫–∏ —Ä–∞—É–Ω–¥–∞!

## üöÄ –õ–æ–∫–∞–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è
- Node.js >= 14.0.0
- npm –∏–ª–∏ yarn

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

```bash
# –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
git clone https://github.com/Romwayl/zonk-game.git
cd zonk-game

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
npm install

# –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä
npm start
```

–°–µ—Ä–≤–µ—Ä –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É `http://localhost:3000`

### –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ —Å –∞–≤—Ç–æ–ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–æ–π

```bash
npm run dev
```

## üì¶ Deploy on Railway

### –ë—ã—Å—Ç—Ä–æ–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ

1. **–ü–æ–¥–∫–ª—é—á–∏—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –∫ Railway**
   - –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å –Ω–∞ [Railway.app](https://railway.app)
   - –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π –ø—Ä–æ–µ–∫—Ç
   - –í—ã–±–µ—Ä–∏—Ç–µ "Deploy from GitHub repo"
   - –ü–æ–¥–∫–ª—é—á–∏—Ç–µ –≤–∞—à —Ñ–æ—Ä–∫ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è `Romwayl/zonk-game`

2. **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—Å—è**
   Railway –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–∞—Ä—É–∂–∏—Ç:
   - `package.json` —Å –∫–æ–º–∞–Ω–¥–æ–π `"start": "node server.js"`
   - Node.js –≤–µ—Ä—Å–∏—è –∏–∑ `engines.node` (>= 14.0.0)
   - –ü–æ—Ä—Ç –∏–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –æ–∫—Ä—É–∂–µ–Ω–∏—è `PORT`

3. **–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è** (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
   
   Railway –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é `PORT`. –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –Ω–µ —Ç—Ä–µ–±—É—é—Ç—Å—è –¥–ª—è –±–∞–∑–æ–≤–æ–π —Ä–∞–±–æ—Ç—ã.

4. **–†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ**
   - Railway –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ä–∞–∑–≤–µ—Ä–Ω–µ—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
   - –ü—Ä–∏ –∫–∞–∂–¥–æ–º push –≤ –ø–æ–¥–∫–ª—é—á–µ–Ω–Ω—É—é –≤–µ—Ç–∫—É –±—É–¥–µ—Ç –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π redeploy

### –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ (Redis Adapter)

‚ö†Ô∏è **–í–∞–∂–Ω–æ**: –ü—Ä–∏ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –Ω–∞ –Ω–µ—Å–∫–æ–ª—å–∫–æ –∏–Ω—Å—Ç–∞–Ω—Å–æ–≤ (horizontal scaling) –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Redis adapter –¥–ª—è Socket.IO, —á—Ç–æ–±—ã –æ–±–µ—Å–ø–µ—á–∏—Ç—å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é –º–µ–∂–¥—É –∏–Ω—Å—Ç–∞–Ω—Å–∞–º–∏.

–ë–µ–∑ Redis adapter:
- –†–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ —Å 1 –∏–Ω—Å—Ç–∞–Ω—Å–æ–º
- Socket.IO —Å–æ–±—ã—Ç–∏—è –Ω–µ –±—É–¥—É—Ç –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å—Å—è –º–µ–∂–¥—É –∏–Ω—Å—Ç–∞–Ω—Å–∞–º–∏
- –ò–≥—Ä–æ–∫–∏, –ø–æ–¥–∫–ª—é—á–µ–Ω–Ω—ã–µ –∫ —Ä–∞–∑–Ω—ã–º –∏–Ω—Å—Ç–∞–Ω—Å–∞–º, –Ω–µ —Å–º–æ–≥—É—Ç –≤–∏–¥–µ—Ç—å –¥—Ä—É–≥ –¥—Ä—É–≥–∞

#### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Redis Adapter

1. **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏**
   ```bash
   npm install @socket.io/redis-adapter redis
   ```

2. **–î–æ–±–∞–≤—å—Ç–µ Redis –Ω–∞ Railway**
   - –í –ø—Ä–æ–µ–∫—Ç–µ Railway –¥–æ–±–∞–≤—å—Ç–µ –Ω–æ–≤—ã–π —Å–µ—Ä–≤–∏—Å "Redis"
   - Railway –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞—Å—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è `REDIS_URL`

3. **–û–±–Ω–æ–≤–∏—Ç–µ server.js**
   ```javascript
   const { createAdapter } = require("@socket.io/redis-adapter");
   const { createClient } = require("redis");

   // –ü–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è io
   if (process.env.REDIS_URL) {
     const pubClient = createClient({ url: process.env.REDIS_URL });
     const subClient = pubClient.duplicate();

     Promise.all([pubClient.connect(), subClient.connect()]).then(() => {
       io.adapter(createAdapter(pubClient, subClient));
       console.log('üì° Redis adapter connected');
     });
   }
   ```

4. **–£–≤–µ–ª–∏—á—å—Ç–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏–Ω—Å—Ç–∞–Ω—Å–æ–≤**
   - –í –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö Railway –º–æ–∂–Ω–æ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞—Ç—å –¥–æ –Ω—É–∂–Ω–æ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∏–Ω—Å—Ç–∞–Ω—Å–æ–≤
   - –í—Å–µ –∏–Ω—Å—Ç–∞–Ω—Å—ã –±—É–¥—É—Ç —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å—Å—è —á–µ—Ä–µ–∑ Redis

## üèóÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
zonk-game/
‚îú‚îÄ‚îÄ server.js              # –û—Å–Ω–æ–≤–Ω–æ–π —Å–µ—Ä–≤–µ—Ä–Ω—ã–π —Ñ–∞–π–ª —Å Socket.IO –ª–æ–≥–∏–∫–æ–π
‚îú‚îÄ‚îÄ scoring.js             # –ú–æ–¥—É–ª—å –ø–æ–¥—Å—á–µ—Ç–∞ –æ—á–∫–æ–≤ (stub, —Ç—Ä–µ–±—É–µ—Ç —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏)
‚îú‚îÄ‚îÄ package.json           # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏ —Å–∫—Ä–∏–ø—Ç—ã
‚îú‚îÄ‚îÄ railway.toml           # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Railway
‚îú‚îÄ‚îÄ views/                 # EJS —à–∞–±–ª–æ–Ω—ã
‚îÇ   ‚îú‚îÄ‚îÄ index.ejs         # –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞
‚îÇ   ‚îú‚îÄ‚îÄ create.ejs        # –°—Ç—Ä–∞–Ω–∏—Ü–∞ —Å–æ–∑–¥–∞–Ω–∏—è –∏–≥—Ä—ã
‚îÇ   ‚îî‚îÄ‚îÄ game.ejs          # –ò–≥—Ä–æ–≤–∞—è –∫–æ–º–Ω–∞—Ç–∞
‚îî‚îÄ‚îÄ public/               # –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã
    ‚îú‚îÄ‚îÄ js/
    ‚îÇ   ‚îî‚îÄ‚îÄ game.js       # –ö–ª–∏–µ–Ω—Ç—Å–∫–∞—è –ª–æ–≥–∏–∫–∞ –∏–≥—Ä—ã
    ‚îî‚îÄ‚îÄ style.css         # –°—Ç–∏–ª–∏
```

## üé≤ –ü—Ä–∞–≤–∏–ª–∞ –∏–≥—Ä—ã (TODO)

–ü–æ–ª–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∞–≤–∏–ª ZONK –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ. –°–º. `scoring.js` –¥–ª—è –¥–µ—Ç–∞–ª–µ–π.

–û—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞:
- –û–¥–Ω–∞ 1: 100 –æ—á–∫–æ–≤
- –û–¥–Ω–∞ 5: 50 –æ—á–∫–æ–≤
- –¢—Ä–∏ –æ–¥–∏–Ω–∞–∫–æ–≤—ã—Ö (–∫—Ä–æ–º–µ 1): 100 √ó –∑–Ω–∞—á–µ–Ω–∏–µ
- –¢—Ä–∏ 1: 1000 –æ—á–∫–æ–≤
- –°—Ç—Ä–∏—Ç (1-2-3-4-5-6): 1500 –æ—á–∫–æ–≤
- –¢—Ä–∏ –ø–∞—Ä—ã: 1500 –æ—á–∫–æ–≤

## üîß API Endpoints

- `GET /` - –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞
- `GET /game/:roomId` - –ò–≥—Ä–æ–≤–∞—è –∫–æ–º–Ω–∞—Ç–∞
- `GET /health` - –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è —Å–µ—Ä–≤–µ—Ä–∞
- `GET /api/debug/games` - –û—Ç–ª–∞–¥–æ—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± –∞–∫—Ç–∏–≤–Ω—ã—Ö –∏–≥—Ä–∞—Ö

## üêõ –û—Ç–ª–∞–¥–∫–∞

–î–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –∞–∫—Ç–∏–≤–Ω—ã—Ö –∏–≥—Ä –∏ –∏—Ö —Å–æ—Å—Ç–æ—è–Ω–∏—è –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç:
```
GET /api/debug/games
```

–õ–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞ —Å–æ–¥–µ—Ä–∂–∞—Ç –¥–µ—Ç–∞–ª—å–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –≤—Å–µ—Ö —Å–æ–±—ã—Ç–∏—è—Ö Socket.IO —Å –≤—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –º–µ—Ç–∫–∞–º–∏.

## üìù TODO

- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø–æ–ª–Ω—É—é –ª–æ–≥–∏–∫—É –ø–æ–¥—Å—á–µ—Ç–∞ –æ—á–∫–æ–≤ –≤ `scoring.js`
- [ ] –î–æ–±–∞–≤–∏—Ç—å unit-—Ç–µ—Å—Ç—ã –¥–ª—è scoring
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ª–æ–≥–∏–∫—É –≤—ã–±–æ—Ä–∞ –∫–æ—Å—Ç–µ–π (toggleDice)
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ª–æ–≥–∏–∫—É –≤–∑—è—Ç–∏—è –æ—á–∫–æ–≤ (takePoints)
- [ ] –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É –Ω–∞ ZONK
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å Hot Dice (–≤—Å–µ –∫–æ—Å—Ç–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è - –º–æ–∂–Ω–æ –±—Ä–æ—Å–∞—Ç—å —Å–Ω–æ–≤–∞)
- [ ] –î–æ–±–∞–≤–∏—Ç—å —É—Å–ª–æ–≤–∏–µ –ø–æ–±–µ–¥—ã (10000 –æ—á–∫–æ–≤)
- [ ] –£–ª—É—á—à–∏—Ç—å UI/UX
- [ ] –î–æ–±–∞–≤–∏—Ç—å –∑–≤—É–∫–æ–≤—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã
- [ ] –î–æ–±–∞–≤–∏—Ç—å –∞–Ω–∏–º–∞—Ü–∏–∏ –±—Ä–æ—Å–∫–æ–≤ –∫–æ—Å—Ç–µ–π

## ü§ù Contributing

Pull requests –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤—É—é—Ç—Å—è! –î–ª—è —Å–µ—Ä—å–µ–∑–Ω—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π, –ø–æ–∂–∞–ª—É–π—Å—Ç–∞, —Å–Ω–∞—á–∞–ª–∞ –æ—Ç–∫—Ä–æ–π—Ç–µ issue –¥–ª—è –æ–±—Å—É–∂–¥–µ–Ω–∏—è.

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

MIT
